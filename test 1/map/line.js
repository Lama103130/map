  // Initialize the map and set its view to Østfold area
  var map = L.map('map').setView([59.1326, 11.3875], 10);
   
  // Add OpenStreetMap tiles
  var osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
  }).addTo(map);

 // Markers for key locations
 
// tog icon 
var trainIcon = L.icon({
  iconUrl: 'train-50.png',  
  iconSize: [30, 30],  
  iconAnchor: [5, 10],  
  popupAnchor: [0, -10]  
});

 var haldenMarker = L.marker([59.129322, 11.354113]).addTo(map)
 haldenMarker.bindPopup("Høgskolen i Østfold-Halden");
 
 var sarpsborgMarker = L.marker([59.28294, 11.107136]).addTo(map);
 sarpsborgMarker.bindPopup("Sarpsborg bussterminall"); 

 
 var haldenStasjonMarker = L.marker([59.120205, 11.383907], {icon: trainIcon}).addTo(map);
 haldenStasjonMarker.bindPopup("Halden Stasjon"); 

 var fredrikstadMarker = L.marker([59.209000, 10.950248]  , {icon: trainIcon}).addTo(map); 
 fredrikstadMarker.bindPopup("Fredrikstad Stasjon");

// red circle 
 var circle = L.circle([59.129322, 11.354113], {
  color: 'red',
  fillColor: '#f03',
  fillOpacity: 0.5,
  radius: 500
 }).addTo(map);

 // Display coordinates on click
 var popup = L.popup();
  function onMapClick(e) {
    popup.setLatLng(e.latlng)
         .setContent("Dine koordinater er " + e.latlng.toString())
         .openOn(map);
  }
  map.on('click', onMapClick);

  //GeoJSON FRE to SAR ( bus) 
  var busToHaldenGeoJson = {
    "type": "FeatureCollection",
    "features": [
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "coordinates": [
            10.94122100027721,
            59.21497532180359
          ],
          "type": "Point"
        }
      },
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "coordinates": [
            [
              10.941194493892255,
              59.21496950760846
            ],
            [
              10.941050602091252,
              59.21499470244632
            ],
            [
              10.94090292366326,
              59.21493849855199
            ],
            [
              10.941099828233348,
              59.21446948313641
            ],
            [
              10.941720834955731,
              59.21452568780296
            ],
            [
              10.942038911569796,
              59.21456444958801
            ],
            [
              10.942220669635105,
              59.21463228260589
            ],
            [
              10.942069204580918,
              59.21475244362085
            ],
            [
              10.941429266113147,
              59.21625441916524
            ],
            [
              10.941440625992556,
              59.2164869774374
            ],
            [
              10.941614810804765,
              59.21680092859117
            ],
            [
              10.941917738558118,
              59.21706836850876
            ],
            [
              10.942175229150621,
              59.21717689331135
            ],
            [
              10.942406213358083,
              59.21722534177255
            ],
            [
              10.942648545740298,
              59.21722554581993
            ],
            [
              10.94285628401687,
              59.21732123121188
            ],
            [
              10.942818891126876,
              59.21744243232328
            ],
            [
              10.945041690218687,
              59.2184077742765
            ],
            [
              10.945390690523482,
              59.21842478444319
            ],
            [
              10.945515333490391,
              59.218528971529594
            ],
            [
              10.945515333490391,
              59.21859701190411
            ],
            [
              10.945727226532284,
              59.21870757722337
            ],
            [
              10.946936267740654,
              59.219075418435466
            ],
            [
              10.948643398444545,
              59.220092210682594
            ],
            [
              10.950572536155647,
              59.221890505138504
            ],
            [
              10.951750875474403,
              59.22308042323536
            ],
            [
              10.952136703392824,
              59.223219155379866
            ],
            [
              10.952105420048326,
              59.223400573487226
            ],
            [
              10.954347378694422,
              59.22636714677779
            ],
            [
              10.960989868815602,
              59.23220884833171
            ],
            [
              10.961365268952989,
              59.23234754336244
            ],
            [
              10.961292274481764,
              59.232539581704685
            ],
            [
              10.962939864454569,
              59.2340331759427
            ],
            [
              10.96389922035948,
              59.23448657566291
            ],
            [
              10.966579162206841,
              59.23681749069442
            ],
            [
              10.96724654022799,
              59.23734552433015
            ],
            [
              10.967621940365348,
              59.23743086233213
            ],
            [
              10.967590657686173,
              59.23761754039265
            ],
            [
              10.969165252704386,
              59.23891891134102
            ],
            [
              10.970750277835975,
              59.23957491366099
            ],
            [
              10.972189311692858,
              59.24007090538558
            ],
            [
              10.972616850738035,
              59.240065572179844
            ],
            [
              10.972783695243919,
              59.24027889976847
            ],
            [
              10.974754545344837,
              59.2410255356352
            ],
            [
              10.979674018741974,
              59.24287147822184
            ],
            [
              10.979893002155677,
              59.2429674679027
            ],
            [
              10.98026840229187,
              59.24297813340624
            ],
            [
              10.980591651330712,
              59.2433567798048
            ],
            [
              10.981915979591918,
              59.244050022673605
            ],
            [
              10.984053601740186,
              59.24579232173838
            ],
            [
              10.987578200558573,
              59.24758393675572
            ],
            [
              10.989653324984374,
              59.24956205674195
            ],
            [
              10.99085251986645,
              59.251369462285055
            ],
            [
              10.993209202752126,
              59.25313945639081
            ],
            [
              10.993730591831905,
              59.25326740402821
            ],
            [
              10.993824441865371,
              59.25366190622029
            ],
            [
              10.997276903917538,
              59.254954783275366
            ],
            [
              11.00458794421803,
              59.25998439666631
            ],
            [
              11.004754788723943,
              59.26019226957604
            ],
            [
              11.005151044423428,
              59.260309530658134
            ],
            [
              11.005067622171083,
              59.260570701617866
            ],
            [
              11.007330433609013,
              59.26341146197609
            ],
            [
              11.010187644437906,
              59.26482376407853
            ],
            [
              11.012012506214433,
              59.265660459217
            ],
            [
              11.012419189696203,
              59.265857639155655
            ],
            [
              11.012690312017781,
              59.265958893275126
            ],
            [
              11.01346196785471,
              59.26618271710305
            ],
            [
              11.02002105953801,
              59.268847178801025
            ],
            [
              11.021939771347917,
              59.269193542827765
            ],
            [
              11.02335665758386,
              59.26941234894059
            ],
            [
              11.026011973069103,
              59.26949570958601
            ],
            [
              11.029020706987666,
              59.26909281729672
            ],
            [
              11.03328911711867,
              59.26790897443371
            ],
            [
              11.037213147615603,
              59.2668438007795
            ],
            [
              11.039950007986505,
              59.26661223604185
            ],
            [
              11.044318124118973,
              59.266927162415044
            ],
            [
              11.049945918794094,
              59.26758942676477
            ],
            [
              11.053144964194928,
              59.268223892193106
            ],
            [
              11.056624911112067,
              59.268381348615804
            ],
            [
              11.063416523119656,
              59.269721669723936
            ],
            [
              11.071086878848547,
              59.2706871772381
            ],
            [
              11.08004353059789,
              59.27463507889445
            ],
            [
              11.08077390031255,
              59.274556518157596
            ],
            [
              11.081542710537775,
              59.27475291965976
            ],
            [
              11.083926022238046,
              59.27477255974762
            ],
            [
              11.084257144876261,
              59.274528579452664
            ],
            [
              11.085089331816306,
              59.27461361638953
            ],
            [
              11.087328671216852,
              59.27414204524521
            ],
            [
              11.08981010770583,
              59.2740724698013
            ],
            [
              11.091141606809032,
              59.274474466106824
            ],
            [
              11.093910519718065,
              59.27580411238793
            ],
            [
              11.095274455779645,
              59.276835984791035
            ],
            [
              11.095132005016183,
              59.2805842098183
            ],
            [
              11.094704449735389,
              59.28240309261733
            ],
            [
              11.095071157951224,
              59.28285586416581
            ],
            [
              11.095912067934478,
              59.28308804552094
            ],
            [
              11.096025704418622,
              59.28341309675815
            ],
            [
              11.098298434102958,
              59.28409801598991
            ],
            [
              11.100662072975666,
              59.2841676680213
            ],
            [
              11.106146065918267,
              59.28295509699288
            ],
            [
              11.106212982635697,
              59.282865174327554
            ],
            [
              11.106707884760937,
              59.282747804541685
            ]
          ],
          "type": "LineString"
        }
      },
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "coordinates": [
            [
              11.106706284983403,
              59.28274838958524
            ],
            [
              11.1070620842317,
              59.282622040694974
            ],
            [
              11.107303180455716,
              59.28254432427863
            ],
            [
              11.10742746649538,
              59.282651378785744
            ],
            [
              11.107529819703444,
              59.2827372711119
            ],
            [
              11.106993607797023,
              59.28288855522297
            ]
          ],
          "type": "LineString"
        }
      }
    ]
  }

  // GeoJson Sarpsborg to Halden (bus) 
  
var sarpsborgToHaldenGeoJson = {
"type": "FeatureCollection",
"features": [
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.107125934597605,
          59.28303123549287
        ],
        [
          11.106816244547247,
          59.282769404550294
        ],
        [
          11.10637840688807,
          59.28293304912526
        ],
        [
          11.106303654116914,
          59.28299850673514
        ],
        [
          11.108151115457105,
          59.28442763317591
        ],
        [
          11.108407410672214,
          59.28451490612926
        ],
        [
          11.109934502994037,
          59.28485308671023
        ],
        [
          11.110628635867158,
          59.285256717198905
        ],
        [
          11.11085289418071,
          59.2852839893566
        ],
        [
          11.110954629413357,
          59.285251826654616
        ],
        [
          11.111694187205728,
          59.28505869450677
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.111680577755209,
          59.28506563044712
        ],
        [
          11.113347275786936,
          59.284673458860624
        ],
        [
          11.1138154493907,
          59.284702154495875
        ],
        [
          11.114239926790617,
          59.2847467921022
        ],
        [
          11.1143522884567,
          59.28473142669088
        ],
        [
          11.11459799386239,
          59.28465738193415
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.114583420720095,
          59.284663590058415
        ],
        [
          11.115985156661992,
          59.28421642961672
        ],
        [
          11.117057965397493,
          59.283859730949274
        ],
        [
          11.118282586689787,
          59.28345650186739
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.118278905640523,
          59.283457028195244
        ],
        [
          11.118827373361285,
          59.28327181949939
        ],
        [
          11.119195200162181,
          59.28314745497201
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.119187707092692,
          59.28314909007932
        ],
        [
          11.120459664422526,
          59.28271817974172
        ],
        [
          11.121034449263306,
          59.282530631569955
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.121024273857671,
          59.28253479083304
        ],
        [
          11.122266584965502,
          59.282137027207625
        ],
        [
          11.122599668378399,
          59.282028963454565
        ],
        [
          11.122734702194407,
          59.282031262686814
        ],
        [
          11.12305878335232,
          59.281743857438215
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.123053754149169,
          59.28174558821905
        ],
        [
          11.123565493658816,
          59.28131192487476
        ],
        [
          11.12412464737423,
          59.28081604353844
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.124110778690067,
          59.28083004533869
        ],
        [
          11.124889896155338,
          59.280113177652595
        ],
        [
          11.124985577248424,
          59.27988508022361
        ],
        [
          11.125354632889753,
          59.27981758171171
        ],
        [
          11.126074519203286,
          59.27978266863582
        ],
        [
          11.12649824975503,
          59.279778013556296
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.126502439009101,
          59.279779244458155
        ],
        [
          11.12783722659205,
          59.279669429792705
        ],
        [
          11.12822716453789,
          59.27954429171902
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.128218434817029,
          59.27954540017831
        ],
        [
          11.128422773265754,
          59.27943914970527
        ],
        [
          11.129006597406317,
          59.27891721274298
        ],
        [
          11.129221882557971,
          59.27865996943956
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.129188637408333,
          59.27868704999864
        ],
        [
          11.129780619847736,
          59.27789933768162
        ],
        [
          11.130551573723665,
          59.27731557483321
        ],
        [
          11.133208611187001,
          59.27610581755263
        ],
        [
          11.13353901999119,
          59.275866674397605
        ],
        [
          11.134378809032967,
          59.275620495866406
        ],
        [
          11.134695450804315,
          59.27541651802056
        ],
        [
          11.134805587071895,
          59.27531101175896
        ],
        [
          11.13505339367424,
          59.27528287670074
        ],
        [
          11.13535626841113,
          59.27526177539153
        ],
        [
          11.136017086019564,
          59.27506482921066
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.135951024293377,
          59.275071712715516
        ],
        [
          11.137441091177351,
          59.2743949944674
        ],
        [
          11.139034634928407,
          59.27342218842591
        ],
        [
          11.13975897299801,
          59.27325300192979
        ],
        [
          11.141062781521839,
          59.27308381459321
        ],
        [
          11.141600861230046,
          59.272988646346874
        ],
        [
          11.14180781496384,
          59.27284060632442
        ],
        [
          11.14209755019101,
          59.27283003201234
        ],
        [
          11.142449371538987,
          59.27285118063293
        ],
        [
          11.143918743050648,
          59.27273486305714
        ],
        [
          11.146733313832215,
          59.272407056841644
        ],
        [
          11.148140599222955,
          59.272089822016454
        ],
        [
          11.1507482162707,
          59.27118039913961
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.150731143533704,
          59.27118038640242
        ],
        [
          11.152138428924445,
          59.27064106601654
        ],
        [
          11.152573031765769,
          59.27040841537061
        ],
        [
          11.152635117886604,
          59.270228638782754
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.152635117886604,
          59.2702392139025
        ],
        [
          11.152800680873213,
          59.27013346255791
        ],
        [
          11.15306972072787,
          59.270218063659684
        ],
        [
          11.153462932821924,
          59.2702815143482
        ],
        [
          11.154414919997777,
          59.270218063659684
        ],
        [
          11.156049854496047,
          59.269921958884225
        ],
        [
          11.159154160505892,
          59.269456646178895
        ],
        [
          11.163148367570813,
          59.26894902506851
        ],
        [
          11.165611117005568,
          59.268800967486214
        ],
        [
          11.16703909776993,
          59.26907593105517
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.167043279225823,
          59.26906429670754
        ],
        [
          11.167726226547046,
          59.269222928580234
        ],
        [
          11.168072565730256,
          59.269138535044874
        ],
        [
          11.16821275149087,
          59.26904515854724
        ],
        [
          11.168311129037868,
          59.268950131938695
        ],
        [
          11.168380229201844,
          59.26885759874534
        ],
        [
          11.168374294255926,
          59.268695789540146
        ],
        [
          11.168194729519016,
          59.268547760950526
        ],
        [
          11.167914412921087,
          59.26834916471467
        ],
        [
          11.167741596819813,
          59.26819176946232
        ],
        [
          11.167610965607672,
          59.26779457674692
        ],
        [
          11.167426584147147,
          59.26572863686782
        ],
        [
          11.16714626755074,
          59.26447580257345
        ],
        [
          11.166574774280132,
          59.26292635245129
        ],
        [
          11.166713026600794,
          59.26172232591751
        ],
        [
          11.166372369130752,
          59.261232035009826
        ],
        [
          11.165000008407373,
          59.26066573550181
        ],
        [
          11.163685493142388,
          59.26013124250673
        ],
        [
          11.16343801914186,
          59.26004553001124
        ],
        [
          11.166004392751603,
          59.25867512544798
        ],
        [
          11.167888928651976,
          59.25794073529272
        ],
        [
          11.169240980234186,
          59.25744785834583
        ],
        [
          11.170702307452785,
          59.25689912370751
        ],
        [
          11.172565229722139,
          59.25616370867438
        ],
        [
          11.173745179271634,
          59.25566569734124
        ],
        [
          11.17624477740236,
          59.254897041551125
        ],
        [
          11.177986316827031,
          59.25440095503349
        ],
        [
          11.17851150509123,
          59.25415776430925
        ],
        [
          11.178884405448386,
          59.253971330636034
        ],
        [
          11.179435887641478,
          59.253456214957495
        ],
        [
          11.180184763736767,
          59.252571940639655
        ],
        [
          11.180483930308192,
          59.25220126359032
        ],
        [
          11.180934599502422,
          59.25168606190749
        ],
        [
          11.182843916492669,
          59.2494067528725
        ],
        [
          11.184838507352156,
          59.24792516914806
        ],
        [
          11.186838594703207,
          59.24583590880745
        ],
        [
          11.189212834717521,
          59.24380352005298
        ],
        [
          11.18928436735461,
          59.24203724927127
        ],
        [
          11.189633215838096,
          59.24125695017044
        ],
        [
          11.191717861112608,
          59.23984296358252
        ],
        [
          11.191852628379465,
          59.2378404948097
        ],
        [
          11.19043219038334,
          59.23518987515186
        ],
        [
          11.189800356627474,
          59.23399953499339
        ],
        [
          11.189657846301294,
          59.23342632024354
        ],
        [
          11.189891148791684,
          59.23162877275118
        ],
        [
          11.190073729295245,
          59.231006927418676
        ],
        [
          11.190437289269006,
          59.23057025197295
        ],
        [
          11.192159796309687,
          59.22914138413384
        ],
        [
          11.192889180513514,
          59.2279379802198
        ],
        [
          11.192537328944827,
          59.22673186985439
        ],
        [
          11.191918362773858,
          59.22397525475156
        ],
        [
          11.19089256695867,
          59.22118099432865
        ],
        [
          11.189278383693834,
          59.21878621480492
        ],
        [
          11.188600713110095,
          59.2168363525813
        ],
        [
          11.189545217626765,
          59.212671749622416
        ],
        [
          11.190818963596977,
          59.21033867359209
        ],
        [
          11.191279021772853,
          59.2076579932951
        ],
        [
          11.193374641855293,
          59.205632767515894
        ],
        [
          11.1964191252484,
          59.20367762173026
        ],
        [
          11.198040551117215,
          59.20121371568804
        ],
        [
          11.199384482922103,
          59.19931198127881
        ],
        [
          11.1999178235485,
          59.19754855980255
        ],
        [
          11.200714263841071,
          59.19388322272388
        ],
        [
          11.201438970140448,
          59.19166833004189
        ],
        [
          11.206315362942428,
          59.189361114050996
        ],
        [
          11.209297825005986,
          59.18820409898588
        ],
        [
          11.210657931262546,
          59.18711603770917
        ],
        [
          11.21027889657114,
          59.18456704942092
        ],
        [
          11.210834631354672,
          59.183224241
        ],
        [
          11.210712384811785,
          59.18215759831713
        ],
        [
          11.211882007001236,
          59.18110291559783
        ],
        [
          11.212256650966609,
          59.18047238428907
        ],
        [
          11.212298530310449,
          59.17967136101714
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.214538352550676,
          59.17818547467357
        ],
        [
          11.226929357235804,
          59.173612513592474
        ],
        [
          11.234674369764775,
          59.16408178880903
        ],
        [
          11.242446828260455,
          59.15494663544794
        ],
        [
          11.246007885312821,
          59.1502423522374
        ],
        [
          11.246617030697564,
          59.14880679121535
        ],
        [
          11.251002274958864,
          59.1458397228582
        ],
        [
          11.25745854208327,
          59.143965434155746
        ],
        [
          11.265130127960305,
          59.14168581994306
        ]
      ],
      "type": "LineString"
    },
    "id": 15
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.265006916103914,
          59.14170543676781
        ],
        [
          11.274875822168184,
          59.13617725073641
        ],
        [
          11.27663880839222,
          59.135052853172766
        ],
        [
          11.277143272696321,
          59.133122874701144
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.27714762920101,
          59.13314780031834
        ],
        [
          11.276933616304206,
          59.132928203232126
        ],
        [
          11.27422278629058,
          59.13250120486657
        ],
        [
          11.270941255220606,
          59.13193999891786
        ],
        [
          11.270893696798765,
          59.13175699498984
        ],
        [
          11.271274164169228,
          59.131122573801406
        ],
        [
          11.270846138378346,
          59.13021972338612
        ],
        [
          11.270846138378346,
          59.12932905033179
        ],
        [
          11.27155951469743,
          59.128792195111714
        ],
        [
          11.271678410750582,
          59.128560368665205
        ],
        [
          11.271274164169228,
          59.12845055559049
        ],
        [
          11.271165548781852,
          59.1283279047539
        ],
        [
          11.27113148890649,
          59.128194323713274
        ],
        [
          11.271271131351767,
          59.12808622641667
        ],
        [
          11.271453376946312,
          59.12802185022562
        ],
        [
          11.271829654574333,
          59.12801470790994
        ],
        [
          11.272106792635043,
          59.12816374212093
        ],
        [
          11.272117794259998,
          59.12833542277783
        ],
        [
          11.274139948216913,
          59.12940538737354
        ],
        [
          11.2747130070873,
          59.12973917189474
        ],
        [
          11.275703154366035,
          59.129272509861586
        ],
        [
          11.275243052563196,
          59.12901505803151
        ],
        [
          11.274513235346166,
          59.1286076781589
        ],
        [
          11.274305991748571,
          59.12848861959083
        ],
        [
          11.273393223699468,
          59.12892500166605
        ],
        [
          11.27327328682282,
          59.12898599201939
        ],
        [
          11.272736771234594,
          59.12869136147367
        ],
        [
          11.272358779700506,
          59.12850477794042
        ],
        [
          11.271992341581065,
          59.128429378836664
        ],
        [
          11.271675896140037,
          59.12849422017311
        ],
        [
          11.271351140444395,
          59.128429796830375
        ],
        [
          11.271244302465238,
          59.12832473044679
        ],
        [
          11.27120136920896,
          59.128203268756835
        ],
        [
          11.271348442240743,
          59.12808869329396
        ],
        [
          11.271560438991415,
          59.128039603185044
        ],
        [
          11.271687229442131,
          59.128042431883244
        ],
        [
          11.271804838674083,
          59.12804783767959
        ],
        [
          11.2723789340109,
          59.12785074215017
        ],
        [
          11.272914610872462,
          59.12767919925139
        ],
        [
          11.273328531518821,
          59.12752313116779
        ],
        [
          11.273683872836926,
          59.127402586523175
        ],
        [
          11.27430725234612,
          59.12712692606394
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.274227709672914,
          59.127160699609135
        ],
        [
          11.27448612802587,
          59.12703884766074
        ],
        [
          11.274805076802068,
          59.12686323673768
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.274770074341092,
          59.12687103136972
        ],
        [
          11.277699930691824,
          59.12478892520346
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.277695575981824,
          59.12481939609654
        ],
        [
          11.279939987485761,
          59.12323960795652
        ],
        [
          11.282460187566272,
          59.1221865956102
        ],
        [
          11.289361710144306,
          59.121324183052224
        ],
        [
          11.304385680308854,
          59.121610153477775
        ],
        [
          11.315862217078518,
          59.12065295340125
        ],
        [
          11.325342567074813,
          59.12271549125484
        ],
        [
          11.327379533219158,
          59.12281214731428
        ],
        [
          11.330258270365732,
          59.12219145222409
        ],
        [
          11.33331840807918,
          59.12281359442318
        ],
        [
          11.335383024637196,
          59.123242769976486
        ],
        [
          11.34377616027723,
          59.123818596551814
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.343693689277302,
          59.12377685132407
        ],
        [
          11.347878437363192,
          59.12435003923318
        ],
        [
          11.35085257376565,
          59.12554173399835
        ],
        [
          11.353125282460013,
          59.12644843151719
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.353137270915482,
          59.12643523483567
        ],
        [
          11.35233756388979,
          59.12744019781522
        ],
        [
          11.3520764350651,
          59.127900795993924
        ],
        [
          11.351701062379362,
          59.12931604982538
        ],
        [
          11.351570497967487,
          59.129659386615174
        ],
        [
          11.35272925712627,
          59.129651012588226
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.212297512412846,
          59.17967656399679
        ],
        [
          11.212334957151086,
          59.1792672875558
        ],
        [
          11.212529669787301,
          59.17901532430986
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.212529793730283,
          59.17901522221052
        ],
        [
          11.212582264443824,
          59.17897923402734
        ]
      ],
      "type": "LineString"
    }
  },
  {
    "type": "Feature",
    "properties": {},
    "geometry": {
      "coordinates": [
        [
          11.212582427174254,
          59.178979389254806
        ],
        [
          11.212678187891271,
          59.17890129358571
        ],
        [
          11.213017479448155,
          59.178692521439075
        ],
        [
          11.213416022050978,
          59.17849093579497
        ],
        [
          11.21387139473984,
          59.178299055280064
        ],
        [
          11.21453951893838,
          59.178185195403614
        ]
      ],
      "type": "LineString"
    }
  }
]
}




// GeoJSON Fredrikstad to Halden (toge) 
var fredrikstadToHaldenGeoJson = {
    "type": "FeatureCollection",
    "features": [
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "coordinates": [
            [
              10.95029269846998,
              59.209079197896756
            ],
            [
              10.951536873013168,
              59.208966803357384
            ],
            [
              10.952964014400806,
              59.20894807089826
            ],
            [
              10.954464342526023,
              59.209126028845645
            ],
            [
              10.956019560705215,
              59.209584968745816
            ],
            [
              10.95744667718128,
              59.21044664441877
            ],
            [
              10.958489588195278,
              59.211814026912975
            ],
            [
              10.959258048942587,
              59.21299405271006
            ],
            [
              10.96191105580391,
              59.21679609058111
            ]
          ],
          "type": "LineString"
        }
      },
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "coordinates": [
            [
              10.96189274260783,
              59.21678673350257
            ],
            [
              10.96352114752466,
              59.21816322576481
            ],
            [
              10.967271967838712,
              59.22001718882521
            ],
            [
              10.970455562120748,
              59.222601347096685
            ],
            [
              10.973895338799878,
              59.224913802904695
            ]
          ],
          "type": "LineString"
        }
      },
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "coordinates": [
            [
              10.97387702585172,
              59.22488573468638
            ],
            [
              10.977627846165745,
              59.227488232438844
            ],
            [
              10.978817118985319,
              59.229276176888334
            ],
            [
              10.97898178914511,
              59.23059600372767
            ],
            [
              10.978560965403233,
              59.23314190840952
            ],
            [
              10.978762226888307,
              59.23485467346586
            ],
            [
              10.981049312445435,
              59.23732539282244
            ],
            [
              10.982860684207793,
              59.23894436563151
            ],
            [
              10.986154082410224,
              59.24191073245541
            ]
          ],
          "type": "LineString"
        }
      },
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "coordinates": [
            [
              10.986167153538446,
              59.24190899825825
            ],
            [
              10.993445649701613,
              59.24821136102875
            ],
            [
              11.008808449863949,
              59.25864423626848
            ]
          ],
          "type": "LineString"
        }
      },
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "coordinates": [
            [
              11.008808395618388,
              59.258556342070506
            ],
            [
              11.021019126617603,
              59.26693580019759
            ],
            [
              11.023544308029614,
              59.267756695930444
            ],
            [
              11.027730428491509,
              59.268342823271524
            ],
            [
              11.03065455054687,
              59.267961882686706
            ],
            [
              11.036158798576565,
              59.26520759067762
            ],
            [
              11.041547892257341,
              59.264562965682785
            ],
            [
              11.047394779915095,
              59.26485603182951
            ],
            [
              11.051864436131439,
              59.265861541227366
            ],
            [
              11.059598821466153,
              59.26861496088324
            ],
            [
              11.066820920454404,
              59.26984511755683
            ],
            [
              11.075878285316605,
              59.27104608478919
            ],
            [
              11.086193700264062,
              59.27406239989577
            ],
            [
              11.088785252034086,
              59.27504687519519
            ],
            [
              11.090676733452028,
              59.27668683144395
            ],
            [
              11.09136442288414,
              59.27955650431008
            ],
            [
              11.091593576367018,
              59.283509228415454
            ],
            [
              11.094344665295353,
              59.28585128744234
            ],
            [
              11.100075289708798,
              59.28822212504457
            ],
            [
              11.10523337128771,
              59.29006598465881
            ],
            [
              11.110104493360723,
              59.290270812816914
            ],
            [
              11.114230940032257,
              59.28912943780804
            ],
            [
              11.118357223045649,
              59.2859390549518
            ],
            [
              11.123571960523037,
              59.282280102900586
            ],
            [
              11.128272627104337,
              59.27976281126735
            ],
            [
              11.130796304056418,
              59.277420611890875
            ],
            [
              11.135032740400447,
              59.27560501111512
            ]
          ],
          "type": "LineString"
        }
      },
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "coordinates": [
            [
              11.135020218029268,
              59.27559985412316
            ],
            [
              11.137415796965485,
              59.2747201481327
            ],
            [
              11.139636698270408,
              59.273432421573375
            ],
            [
              11.142281816855501,
              59.27042328878602
            ],
            [
              11.144128408951985,
              59.267311869609614
            ],
            [
              11.145178067362252,
              59.26468458181432
            ],
            [
              11.146189116250298,
              59.26307697181204
            ],
            [
              11.162580266291883,
              59.25011696116334
            ],
            [
              11.163591309820305,
              59.2484397258639
            ],
            [
              11.163254293524318,
              59.24598117683141
            ],
            [
              11.163141957557627,
              59.243717780438686
            ],
            [
              11.185377544017626,
              59.224974978953355
            ],
            [
              11.187507886981848,
              59.22176382179222
            ],
            [
              11.190248953245714,
              59.206825804480985
            ],
            [
              11.189327771818654,
              59.20251222045468
            ],
            [
              11.190316352954682,
              59.200832652613656
            ],
            [
              11.197292629339017,
              59.19711059029552
            ],
            [
              11.1996292756603,
              59.19461382163769
            ],
            [
              11.200303301577293,
              59.18859550778461
            ],
            [
              11.202819691334213,
              59.182645198169354
            ],
            [
              11.205246208667546,
              59.1811142942864
            ],
            [
              11.210301448280148,
              59.18034305631551
            ],
            [
              11.21524434698793,
              59.17982505267108
            ],
            [
              11.219400881308019,
              59.17904227888167
            ],
            [
              11.223245590397255,
              59.17712992298527
            ],
            [
              11.232008024146381,
              59.17026797871807
            ],
            [
              11.234838961034512,
              59.167354694800025
            ],
            [
              11.237580019626733,
              59.16160801554247
            ],
            [
              11.240680554452922,
              59.157242666122556
            ],
            [
              11.243295777942365,
              59.15392741001483
            ],
            [
              11.24596944055844,
              59.15274083278575
            ],
            [
              11.249833894089107,
              59.15207264497536
            ],
            [
              11.253383799075834,
              59.151001213149556
            ]
          ],
          "type": "LineString"
        }
      },
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "coordinates": [
            [
              11.25337054700094,
              59.15105230182249
            ],
            [
              11.263536841137096,
              59.14514500533531
            ],
            [
              11.292992048657908,
              59.12471926776999
            ],
            [
              11.299486107269388,
              59.12279505556478
            ],
            [
              11.305245718776916,
              59.12237845930889
            ],
            [
              11.31382721964934,
              59.12186264708373
            ],
            [
              11.319934727153282,
              59.120235864892635
            ],
            [
              11.324843926223195,
              59.119124847301634
            ],
            [
              11.329134643519296,
              59.119005807566055
            ],
            [
              11.332845566717594,
              59.11944225804956
            ],
            [
              11.336363181798447,
              59.119045460997995
            ],
            [
              11.338411902670202,
              59.118053448265556
            ],
            [
              11.341349691089647,
              59.11735902226454
            ],
            [
              11.34826895592002,
              59.118033607718075
            ]
          ],
          "type": "LineString"
        }
      },
      {
        "type": "Feature",
        "properties": {},
        "geometry": {
          "coordinates": [
            [
              11.348259614010146,
              59.1180350638696
            ],
            [
              11.360601066664913,
              59.118458382109736
            ],
            [
              11.363223390780576,
              59.11905402714976
            ],
            [
              11.366575885155271,
              59.12055381682313
            ],
            [
              11.3697577646534,
              59.120797129660644
            ],
            [
              11.373498214391816,
              59.11962787166186
            ],
            [
              11.376550553367935,
              59.11892179311661
            ],
            [
              11.378828967133984,
              59.11907622830657
            ],
            [
              11.383944836535164,
              59.120311849039695
            ]
          ],
          "type": "LineString"
        }
      }
    ]
  }
  
  // Define layers for bus routes
var sarpsborgToHaldenRouteBus = L.geoJSON(sarpsborgToHaldenGeoJson, {
  style: { color: 'blue', weight: 2 },
  onEachFeature: function (feature, layer) {
    layer.bindPopup('Bus Route');
  }
});

var busToHaldenRoute = L.geoJSON(busToHaldenGeoJson, {
  style: { color: 'blue', weight: 2 }, 
  onEachFeature: function (feature, layer) {
    layer.bindPopup('Fredrikstad bussterminall');
  }
});

//-------------------------------------------------------------------------------layear for train markers
var trainMarkersGroup = L.layerGroup([haldenStasjonMarker, fredrikstadMarker]);

// Define layers for train routes
var fredrikstadToHaldenRoute = L.geoJSON(fredrikstadToHaldenGeoJson, {
  style: { color: 'red', weight: 2 },
  onEachFeature: function (feature, layer) {
    layer.bindPopup('Train Route from Fredrikstad to Halden');
  }
});

// Grouping markers and routes for Sarpsborg and Fredrikstad
var sarpsborgGroup = L.layerGroup([sarpsborgMarker, sarpsborgToHaldenRouteBus, busToHaldenRoute]);
var fredrikstadGroup = L.layerGroup([fredrikstadMarker, fredrikstadToHaldenRoute]);

// Base map
var baseMaps = {
"OpenStreetMap": osm
};

// layers for routes
var overlayMaps = {
"Bussrute fra Fredrikstad til Halden via Sarpsborg.": sarpsborgGroup,
"Togrute fra Fredrikstad til Halden via Sarpsborg.": fredrikstadGroup
};

// layer control to toggle between routes
L.control.layers(baseMaps, overlayMaps).addTo(map);

// Optionally, add one route by default
sarpsborgGroup.addTo(map);


//en kontroll for informasjon
var infoControl = L.control({ position: 'topright' });

infoControl.onAdd = function (map) {
    var div = L.DomUtil.create('div', 'info'); 
    div.innerHTML = '<h4>Transportinformasjon</h4>' +
                    '<p>Toget fra Fredrikstad til Halden tar omtrent 40 minutter</p>' +
                    '<p>Buss fra Sarpsborg  til Halden tar omtrent en time</p>'; 
    return div;
};

// informasjonkontrollen til kartet
infoControl.addTo(map);
